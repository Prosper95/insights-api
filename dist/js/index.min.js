"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Account(){var e=new _urijs2.default;return{url:e.toString(),init:function(t){e.segment(t+"account/products")},getProducts:function(t){return e.setQuery(t),fetch(e.toString(),{credentials:"same-origin"}).then(checkStatus).then(parseJSON).catch(handleError)}}}function init(e){var t=(0,_urijs2.default)(e+"account/settings");return{url:t.toString(),getSettings:function(){var e=new Headers;return e.append("Accept","text/plain"),e.append("Accept","application/json"),e.append("Accept","*/*"),e.append("X-Omit","WWW-Authenticate"),fetch(t.toString(),{credentials:"same-origin",cache:"default",headers:e}).then(function(e){if(console.log("Checking status"),console.log(e),e.status>=200&&e.status<300)return Promise.resolve(e);var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){return e.json()})},updateSettings:function(e){return fetch(t.toString(),{method:"POST",body:e}).then(checkStatus).then(parseJSON).catch(handleError)}}}function checkStatus(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function parseJSON(e){return e.json()}function formatJSON(e){return{data:e}}function handleError(e){console.log("request faild",e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Account=Account,exports.init=init,require("fetch"),require("es6-promise");var _urijs=require("urijs"),_urijs2=_interopRequireDefault(_urijs);require("babel/browser-polyfill");var _responseHandlers=require("./responseHandlers"),handlers=_interopRequireWildcard(_responseHandlers);